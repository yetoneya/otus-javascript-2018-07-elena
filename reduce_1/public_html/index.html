
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <script>
            var fn1 = () => {
                console.log('fn1')
                return Promise.resolve(2)
            }

            var fn2 = () => new Promise(resolve => {
                    console.log('fn2')
                    setTimeout(() => resolve(3), 1000);
                });



            async function promiseReduce(asyncFunctions, reducer, initialValue) {
                var result=[];
                for(var x=0;x<asyncFunctions.length;x++){
                    try {
                        var res=await asyncFunctions[x]();
                    }catch(error) {
                        alert(error);
                        
                    }
                    if(typeof res !=='number')continue;
                    result[x]=res;
                }
                return result.reduce(reducer,initialValue);

        //      return Promise.all(fns).then(values => 
        //      values.reduce(reducer,initialValue));
           }

            promiseReduce(
                    [fn1, fn2],
                    function (memo, value) {
                        console.log('reduce')
                        return memo * value
                    },
                    2
                    )
                    .then(console.log)
                    .catch (exception=>{alert(exception);}); 
        </script>
    </body>
</html>
